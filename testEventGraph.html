

<!DOCTYPE html>
<meta charset="utf-8">
<style>
    html{
       background-color: #404040;
   }
   .node {

   }

   .label{
        fill:rgba(255,255,255,.6);
        font: 14px Helvetica;
        pointer-events: none;
  }

  .link {
      stroke: #fa5c4f;
      fill: transparent;
      stroke-width: 2px;
      stroke-opacity: .9;
  }
  marker{
      fill: #fa5c4f;
  }

</style>
<body>
	<script src="js/lib/d3.v3.js" type="text/javascript"></script>
	<script type="text/javascript">

		var graph = {"nodes":[{"name":0,"handler_name":"EventHandler_","group":1},{"name":1,"handler_name":"EventHandler_1","group":1},{"name":2,"handler_name":"EventHandler_2","group":1},{"name":3,"handler_name":"EventHandler_3","group":1},{"name":2,"handler_name":"Function_4","group":2},{"name":2,"handler_name":"Function_5","group":2},{"name":2,"handler_name":"Function_6","group":2},{"name":2,"handler_name":"Function_7","group":2},{"name":8,"handler_name":"EventHandler_8","group":1},{"name":9,"handler_name":"MouseSync_9","group":1},{"name":8,"handler_name":"Function_10","group":2},{"name":8,"handler_name":"Function_11","group":2},{"name":8,"handler_name":"Function_12","group":2},{"name":8,"handler_name":"Function_13","group":2},{"name":14,"handler_name":"EventHandler_14","group":1},{"name":15,"handler_name":"EventHandler_15","group":1},{"name":16,"handler_name":"EventHandler_16","group":1},{"name":15,"handler_name":"Function_17","group":2},{"name":15,"handler_name":"Function_18","group":2},{"name":15,"handler_name":"Function_19","group":2},{"name":15,"handler_name":"Function_20","group":2},{"name":15,"handler_name":"Function_21","group":2},{"name":16,"handler_name":"Function_22","group":2},{"name":16,"handler_name":"Function_23","group":2},{"name":16,"handler_name":"Function_24","group":2},{"name":25,"handler_name":"TouchSync_25","group":1},{"name":8,"handler_name":"Function_26","group":2},{"name":8,"handler_name":"Function_27","group":2},{"name":8,"handler_name":"Function_28","group":2},{"name":8,"handler_name":"Function_29","group":2},{"name":8,"handler_name":"Function_30","group":2},{"name":31,"handler_name":"EventHandler_31","group":1},{"name":31,"handler_name":"Function_32","group":2},{"name":31,"handler_name":"Function_33","group":2},{"name":31,"handler_name":"Function_34","group":2},{"name":31,"handler_name":"Function_35","group":2},{"name":31,"handler_name":"Function_36","group":2},{"name":31,"handler_name":"Function_37","group":2},{"name":31,"handler_name":"Function_38","group":2},{"name":31,"handler_name":"Function_39","group":2},{"name":31,"handler_name":"Function_40","group":2},{"name":1,"handler_name":"Function_41","group":2},{"name":3,"handler_name":"Function_42","group":2},{"name":1,"handler_name":"Function_43","group":2},{"name":3,"handler_name":"Function_44","group":2},{"name":1,"handler_name":"Function_45","group":2},{"name":3,"handler_name":"Function_46","group":2},{"name":31,"handler_name":"_isEscapeKeyDown","group":2},{"name":31,"handler_name":"_clearEscapeKey","group":2},{"name":31,"handler_name":"Function_49","group":2},{"name":50,"handler_name":"EventHandler_50","group":1},{"name":50,"handler_name":"Function_51","group":2},{"name":50,"handler_name":"Function_52","group":2},{"name":53,"handler_name":"EventHandler_53","group":1},{"name":54,"handler_name":"EventHandler_54","group":1},{"name":55,"handler_name":"EventHandler_55","group":1},{"name":56,"handler_name":"EventHandler_56","group":1},{"name":57,"handler_name":"EventHandler_57","group":1},{"name":58,"handler_name":"EventHandler_58","group":1},{"name":59,"handler_name":"EventHandler_59","group":1},{"name":60,"handler_name":"EventHandler_60","group":1},{"name":61,"handler_name":"EventHandler_61","group":1},{"name":62,"handler_name":"EventHandler_62","group":1},{"name":63,"handler_name":"EventHandler_63","group":1},{"name":64,"handler_name":"EventHandler_64","group":1},{"name":65,"handler_name":"EventHandler_65","group":1},{"name":66,"handler_name":"EventHandler_66","group":1},{"name":67,"handler_name":"EventHandler_67","group":1},{"name":68,"handler_name":"EventHandler_68","group":1},{"name":69,"handler_name":"EventHandler_69","group":1},{"name":70,"handler_name":"EventHandler_70","group":1},{"name":71,"handler_name":"EventHandler_71","group":1},{"name":72,"handler_name":"EventHandler_72","group":1},{"name":73,"handler_name":"EventHandler_73","group":1},{"name":74,"handler_name":"EventHandler_74","group":1},{"name":75,"handler_name":"EventHandler_75","group":1},{"name":76,"handler_name":"EventHandler_76","group":1},{"name":77,"handler_name":"EventHandler_77","group":1},{"name":78,"handler_name":"EventHandler_78","group":1},{"name":79,"handler_name":"EventHandler_79","group":1},{"name":80,"handler_name":"EventHandler_80","group":1},{"name":81,"handler_name":"EventHandler_81","group":1},{"name":82,"handler_name":"EventHandler_82","group":1},{"name":83,"handler_name":"EventHandler_83","group":1},{"name":84,"handler_name":"EventHandler_84","group":1},{"name":85,"handler_name":"EventHandler_85","group":1},{"name":86,"handler_name":"EventHandler_86","group":1},{"name":87,"handler_name":"EventHandler_87","group":1},{"name":88,"handler_name":"EventHandler_88","group":1},{"name":89,"handler_name":"EventHandler_89","group":1},{"name":90,"handler_name":"EventHandler_90","group":1},{"name":91,"handler_name":"EventHandler_91","group":1},{"name":92,"handler_name":"EventHandler_92","group":1},{"name":93,"handler_name":"EventHandler_93","group":1},{"name":94,"handler_name":"EventHandler_94","group":1},{"name":95,"handler_name":"EventHandler_95","group":1},{"name":96,"handler_name":"EventHandler_96","group":1},{"name":97,"handler_name":"EventHandler_97","group":1},{"name":98,"handler_name":"EventHandler_98","group":1},{"name":99,"handler_name":"EventHandler_99","group":1},{"name":100,"handler_name":"EventHandler_100","group":1},{"name":101,"handler_name":"EventHandler_101","group":1},{"name":102,"handler_name":"EventHandler_102","group":1},{"name":103,"handler_name":"EventHandler_103","group":1},{"name":104,"handler_name":"EventHandler_104","group":1},{"name":105,"handler_name":"EventHandler_105","group":1},{"name":106,"handler_name":"EventHandler_106","group":1},{"name":107,"handler_name":"EventHandler_107","group":1},{"name":108,"handler_name":"EventHandler_108","group":1},{"name":109,"handler_name":"EventHandler_109","group":1},{"name":110,"handler_name":"EventHandler_110","group":1},{"name":111,"handler_name":"EventHandler_111","group":1},{"name":112,"handler_name":"EventHandler_112","group":1},{"name":113,"handler_name":"EventHandler_113","group":1},{"name":114,"handler_name":"EventHandler_114","group":1}],"edges":[{"id":"EventHandler_2-Function_4","source":2,"target":4,"value":2},{"id":"EventHandler_2-Function_5","source":2,"target":5,"value":2},{"id":"EventHandler_2-Function_6","source":2,"target":6,"value":2},{"id":"EventHandler_2-Function_7","source":2,"target":7,"value":2},{"id":"EventHandler_8-MouseSync_9","source":8,"target":9,"value":3},{"id":"EventHandler_8-Function_10","source":8,"target":10,"value":2},{"id":"EventHandler_8-Function_11","source":8,"target":11,"value":2},{"id":"EventHandler_8-Function_12","source":8,"target":12,"value":2},{"id":"EventHandler_8-Function_13","source":8,"target":13,"value":2},{"id":"EventHandler_3-EventHandler_1","source":3,"target":1,"value":3},{"id":"EventHandler_15-Function_17","source":15,"target":17,"value":2},{"id":"EventHandler_15-Function_18","source":15,"target":18,"value":2},{"id":"EventHandler_15-Function_19","source":15,"target":19,"value":2},{"id":"EventHandler_15-Function_20","source":15,"target":20,"value":2},{"id":"EventHandler_15-Function_21","source":15,"target":21,"value":2},{"id":"EventHandler_16-Function_22","source":16,"target":22,"value":2},{"id":"EventHandler_16-Function_23","source":16,"target":23,"value":2},{"id":"EventHandler_16-Function_24","source":16,"target":24,"value":2},{"id":"EventHandler_8-TouchSync_25","source":8,"target":25,"value":3},{"id":"EventHandler_8-Function_26","source":8,"target":26,"value":2},{"id":"EventHandler_8-Function_27","source":8,"target":27,"value":2},{"id":"EventHandler_8-Function_28","source":8,"target":28,"value":2},{"id":"EventHandler_8-Function_29","source":8,"target":29,"value":2},{"id":"EventHandler_8-Function_30","source":8,"target":30,"value":2},{"id":"EventHandler_14-EventHandler_1","source":14,"target":1,"value":3},{"id":"EventHandler_31-Function_32","source":31,"target":32,"value":2},{"id":"EventHandler_31-Function_33","source":31,"target":33,"value":2},{"id":"EventHandler_31-Function_34","source":31,"target":34,"value":2},{"id":"EventHandler_31-Function_35","source":31,"target":35,"value":2},{"id":"EventHandler_31-Function_36","source":31,"target":36,"value":2},{"id":"EventHandler_31-Function_37","source":31,"target":37,"value":2},{"id":"EventHandler_31-Function_38","source":31,"target":38,"value":2},{"id":"EventHandler_31-Function_39","source":31,"target":39,"value":2},{"id":"EventHandler_31-Function_40","source":31,"target":40,"value":2},{"id":"EventHandler_1-Function_41","source":1,"target":41,"value":2},{"id":"EventHandler_3-Function_42","source":3,"target":42,"value":2},{"id":"EventHandler_14-Function_42","source":14,"target":42,"value":2},{"id":"EventHandler_1-Function_43","source":1,"target":43,"value":2},{"id":"EventHandler_3-Function_44","source":3,"target":44,"value":2},{"id":"EventHandler_14-Function_44","source":14,"target":44,"value":2},{"id":"EventHandler_1-Function_45","source":1,"target":45,"value":2},{"id":"EventHandler_3-Function_46","source":3,"target":46,"value":2},{"id":"EventHandler_14-Function_46","source":14,"target":46,"value":2},{"id":"EventHandler_31-_isEscapeKeyDown","source":31,"target":47,"value":2},{"id":"EventHandler_31-_clearEscapeKey","source":31,"target":48,"value":2},{"id":"EventHandler_31-Function_49","source":31,"target":49,"value":2},{"id":"EventHandler_50-Function_51","source":50,"target":51,"value":2},{"id":"EventHandler_50-Function_52","source":50,"target":52,"value":2}]};



		var width = window.innerWidth,
            height = window.innerHeight;


        var color = d3.scale.category20();

        var force = d3.layout.force()
            .nodes(graph.nodes)
            .links(graph.edges)
            .size([width, height])
            .linkDistance(60)
            .charge(-100)
            .on("tick", tick)
            .start();

        var svg = d3.select("body").append("svg")
            .attr("width", width)
            .attr("height", height);





		// build the arrow.
        svg.append("svg:defs").selectAll("marker")
			.data(["end"])      // Different link/path types can be defined here
			.enter().append("svg:marker")    // This section adds in the arrows
                .attr("id", String)
                .attr("viewBox", "0 -5 10 10")
                .attr("refX", 15)
                .attr("refY", -1.5)
                .attr("markerWidth", 6)
                .attr("markerHeight", 6)
                .attr("orient", "auto")
                .append("svg:path")
                .attr("d", "M0,-5L10,0L0,5");

		 // add the links and the arrows
       var path = svg.append("svg:g").selectAll("path")
       .data(force.links())
       .enter().append("svg:path")
       .attr("class", "link")
       .attr("marker-end", "url(#end)");


		// define the nodes
		var node = svg.selectAll(".node")
          .data(force.nodes())
          .enter().append("g")
              .attr("class", "node")
              .attr("id", function(d){return d.handler_name})
              .style("fill", function(d) { return color(d.group); })
              .call(force.drag);


		// add the nodes
		node.append("circle")
      .attr("r", 10);


		// add the text 
		node.append("text")
      .attr("x", 12)
      .attr("class", "label")
      .attr("dy", ".4em")
      .text(function(d) { return d.handler_name; });

		// add the curvy lines
		function tick() {
          path.attr("d", function(d) {
              var dx = d.target.x - d.source.x,
              dy = d.target.y - d.source.y,
              dr = Math.sqrt(dx * dx + dy * dy);
              return "M" + 
              d.source.x + "," + 
              d.source.y + "A" + 
              dr + "," + dr + " 0 0,1 " + 
              d.target.x + "," + 
              d.target.y;
          });

          node
          .attr("transform", function(d) { 
              return "translate(" + d.x + "," + d.y + ")"; });
      }

    var animationCounter = 0;
    setInterval(function(){
        d3.selectAll("g").transition()
            .duration(300)
            .style("fill", function() {
                return "hsl(" + Math.random() * 360 + ",100%,50%)";
            });
    },300);

  </script>
</body>
</html>